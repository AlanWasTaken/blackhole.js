blackHole.js
============

## Introduce

![Blackhole.js](http://i.imgur.com/6d588zV.png)

This library is child of two parents:  
* [WorldBank Contract Awards](http://d3.artzub.com/wbca/)
* [GitHub Visualizer](http://artzub.com/ghv)

The main objective of this library is the visualization of data that change over time.
Suitable for the visualization of such data as:
* Commits history ([GitHub Visualizer](http://artzub.com/ghv)) 
* Economic Indicators ([Distribution of Russian budget 2013](http://clearspending.artzub.com/), [LuckyLunch](http://works.artzub.com/luckylunch/))
* Network attacks ([NetMonitor](http://artzub.com/img/demo_netMon.gif)) 
* And etc.

Depends of [D3js](http://d3js.org)

## Structure

- [Quick Example](#qe)
- [Documentation](#api)
    - [Properties](#Properties)
    - [Settings](#Settings)
    - [Methods](#Methods)
- [For developers](#fd)

<a name="qe" />
## Quick Examples
  

> For fast look [Example I](http://codepen.io/artzub/pen/vcfyd)

We have data (generated by [script](http://codepen.io/artzub/pen/bIkvH.js)):

```json
[
  {
    "key": 119,
    "category": "nemo,",
    "parent": {
      "name": "cumque5",
      "key": 5
    },
    "date": "2014-01-29T15:39:45.340Z"
  },
  {
    "key": 96,
    "category": "nemo,",
    "parent": {
      "name": "cumque5",
      "key": 5
    },
    "date": "2014-01-29T19:56:18.885Z"
  },
  {
    "key": 125,
    "category": "nemo,",
    "parent": {
      "name": "cumque5",
      "key": 5
    },
    "date": "2014-01-30T01:00:53.648Z"
  },
  {
    "key": 51,
    "category": "nemo,",
    "parent": {
      "name": "eveniet1",
      "key": 1
    },
    "date": "2014-01-30T06:46:51.531Z"
  },
  {
    "key": 237,
    "category": "nemo,",
    "parent": {
      "name": "cumque5",
      "key": 5
    },
    "date": "2014-01-30T12:25:14.810Z"
  },
  //...
]
```

And code:

```html
<div id="canvas"></div>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://lib.artzub.com/js/blackhole.js/blackhole.js"></script>
<script>
var data = rawData.map(function(d) {
        d.date = new Date(d.date);
        return d;
    })
    , stepDate = 864e5
    , d3bh = d3.blackHole("#canvas")
    ;

d3bh.setting.drawTrack = true;

d3bh.on('calcRightBound', function(l) {
        return +l + stepDate;
    })
    .start(data)
    ;
</script>
```

<a name="api" />
## Documentation

### Properties

* __version__ — the version of library
* __setting__ — object with fields of [settings](#settings)

### Settings

* #### Items
    * __alpha__ — uses for calculation cluster (default: 0.025)
    * __childLife__ — number of ticks of life a child node (default: 255)
    * __parentLife__ — number of ticks of life a parent node, after the death of all children (default: 255)
    * __rateOpacity__ — rate of decrease of opacity (default: .5)
    * __rateFlash__ — rate of decrease of flash effect (default: 2.5)
    * __padding__ — padding of parent (default: 25)

* #### Behavior
    * __skipEmptyDate__ — skips empty dates (default: true). 
        > *if after filtering data, an array is empty then it steps on next date.* 
    * __realtime__ — indicates that need work in mode realtime (default: false). 
        > *This parameters must be initialized before starting visualization.* 
    * __asyncParsing__ — parsing data in async mode (default: false). 
        > If param is true, then will work method [.on('parsing')](#on_parsing)
        > *This parameters must be initialized before starting visualization.*
    * __speed__ — sets milliseconds for setInterval of method filtering data (default: 1000)
    * __increaseChildWhenCreated__ — increase children nodes when they are created (default: false)
    * __createNearParent__ — create children nodes near they parents (default: false)

* #### Drawing
    * __blendingLighter__ — if true, then sets the property canvas compositeOperation in the 'lighter' value (default: true)
    * __drawEdge__ — drawing edges (default: false)
    * __drawChild__ — drawing children nodes (default: true)
    * __drawChildLabel__ — drawing labels of children nodes (default: false)
    * __drawParent__ — drawing parents nodes (default: true)
    * __drawParentLabel__ — drawing labels of parents nodes (default: true) 
    * __drawPaddingCircle__ — drawing padding circles of parents nodes (default: false) 
    * __drawHalo__ — drawing the halo effect of children nodes (default: true)
    * __drawTrack__ — drawing track of children nodes (default: true)
    * __drawAsPlasma__ — drawing children nodes uses plasma effect (default: true)
    * __drawParentImg__ — drawing images of parents nodes (default: true) 
    * __hasLabelMaxWidth__ — if true, then uses the maxWidth argument into the fillText method, in other words, text zooming based on the max width of canvas. (default: true) 

* #### Colors
    * __colorless__ — 
    * __colorlessFlash__ — 
    * __parentColors__ — 
    * __categoryColors__ — 

* #### Zoom and drag
    * __zoomAndDrag__ — 
    * __zoom__ — 
    * __scale__ — 
    * __translate__ — 
    * __scaleExtent__ — 

### Methods

* __.IsRun__
* __.IsPaused__
* __.stop__
* __.pause__
* __.resume__
* __.selectNode__
* __.selectCategory__
* __.frozenCategory__
* __.parents__
* __.children__
* __.categories__
* __.categoryMax__
* __.sort__
* __.filter__
* __.speed__
* __.append__
* __.start__

### Style
* __.size__
* __.translate__
* __.style__``` = function(name, value, priority) {}```
* __.scale__
* __.getCanvas__
* __.findStyleProperty__
* __.on__``` = function(key, value) {...}```    

    > ***key*** — string value form __keys__  
    > ***value*** — function  

    *keys*:  
    - __calcrightbound__
    - __processing__
    - __processed__
    - __stopped__
    - __beforeparsing__
    - __parsing__<a name="on_parsing" />
    - __afterparsing__
    - __getchildlabel__
    - __getparentlabel__
    - __getselectedcolor__
    - __getvisiblebystep__
    - __getcreatenearparent__
    - __getname__
    - __getcategorykey__
    - __getcategoryname__
    - __getkey__
    - __getchildkey__
    - __getparentkey__
    - __getparent__
    - __getparentimage__
    - __getgroupby__
    - __getvalue__
    - __getparentradius__
    - __getchildradius__
    - __getparentposition__
    - __getparentfixed__
    - __finished__
    - __starting__
    - __started__
    - __mouseovernode__
    - __mousemove__
    - __mouseoutnode__
    - __particleattarget__
    
<a name="fd" />
## For developers

![ga](http://www.google-analytics.com/__utm.gif?utmwv=4&utmac=UA-28343295-16&utmdt=blackholeReadme&utmhid=2052327202&utmn=1)
